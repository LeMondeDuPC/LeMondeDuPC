{% extends 'base.html.twig' %}

{% block title %}Catégorie : {{ category.name }}{% endblock %}

{% block body %}
    <article class="post">
        <header>
            <div class="title">
                <h1 class="heading">Catégorie : {{ category.name }}</h1>
            </div>
        </header>
        <section>
            {% for product in products %}
                <article class="mini-post">
                    <section class="content">
                        <h2 class="title">
                            <a href="{{ path('product_show', {'id' : product.id, 'slug' : product.title|slugify }) }}">{{ product.title }}</a>
                        </h2>
                        <p>{{ product.description }}</p>
                        <div class="display-article">
                            {% if product.user is not null %}
                                <span class="item icon icon-user"><a
                                            href="{{ path('user_show', {'id' : product.user.id}) }}">
                                    {{ product.user.username }}
                                </a></span>
                            {% else %}
                                <span class="item icon icon-user">Anonyme</span>
                            {% endif %}
                            <time class="item icon icon-plus-square">{{ product.timePublication|date('Y-m-d H:i:s') }}</time>
                        </div>
                    </section>
                    <section>
                        <a href="{{ path('product_show', {'id' : product.id, 'slug' : product.title|slugify }) }}"
                           class="image">
                            {% if product.file is not null %}
                                <img src="{{ asset(product.file.getWebPath) }}"
                                     alt="{{ product.file.description }}"/>
                            {% endif %}
                        </a>
                    </section>
                </article>
            {% else %}
                <p>Aucun article n'est disponible pour le moment</p>
            {% endfor %}
        </section>
    </article>
{% endblock %}
{% block paginate %}
    {{ knp_pagination_render(products) }}
{% endblock %}
